# ===========================
# Core backend config
# ===========================

# Port for the InfinitySnap backend HTTP server
PORT=4000

# Public URL where this backend is reachable
# - Dev:   http://localhost:4000
# - Prod:  e.g. https://infinitysnap.yourdomain.com
BACKEND_URL=http://localhost:4000

# Node environment (optional; can be "development" or "production")
NODE_ENV=development

INFINITYSNAP_DEMO_MODE=true

# ===========================
# Cline (CLI + optional MCP gateway)
# ===========================

# Path/command for Cline CLI.
# If installed globally: "cline"
# If via npx:            "npx cline"
CLINE_CLI_PATH=wsl cline

# Optional HTTP MCP gateway base URL.
# If you later build an HTTP service that uses Cline+MCP behind the scenes, set it here:
# e.g. CLINE_MCP_BASE_URL=http://localhost:8787
CLINE_MCP_BASE_URL=


# ===========================
# External Patch Engine (future / optional)
# ===========================
# InfinitySnap is designed to support an external patch engine in the future
# (e.g. a Cline-based agent service, local LLM server, etc.). For now,
# there is no external patch engine configured, and the backend will
# simply return "no suggestion available" when /generate is called.
#
# When you add one, you can introduce env vars here like:
# PATCH_ENGINE_URL=...
# PATCH_ENGINE_API_KEY=...


# ===========================
# Kestra (workflow engine)
# ===========================

# Base URL for your Kestra instance.
# - Local Docker: http://localhost:8080
# - Cloud:        https://your-tenant.kestra.io
KESTRA_API_URL=

# API token created in Kestra UI (Authorization: Bearer <token>)
KESTRA_API_KEY=

# Namespace and Flow ID for the InfinitySnap verification flow in Kestra.
# You will create a flow like: namespace "infinitysnap", id "infinitysnap.verify"
KESTRA_FLOW_NAMESPACE=infinitysnap
KESTRA_FLOW_ID=infinitysnap.verify

# Docker image used by Kestra tasks when verifying patches.
# Node 18 is a reasonable default for JS/TS projects.
DEFAULT_VERIFY_IMAGE=node:18

# Optional backend API key if you want Kestra to authenticate when calling
# /api/v1/results/:runId/kestra-callback
BACKEND_API_KEY=


# ===========================
# Storage & housekeeping
# ===========================

# Where InfinitySnap stores results, patches, artifacts.
# Default (if unset) is <project_root>/backend/.data/...
# You can override if deploying with a mounted volume.
ARTIFACTS_DIR=

# Hard limit on how many runs to keep (oldest will be deleted when exceeded).
# Only used if you implement retention cleanup logic.
INFINITYSNAP_MAX_RUNS=200

# How many days to keep runs before they are eligible for cleanup.
INFINITYSNAP_RUN_RETENTION_DAYS=14
